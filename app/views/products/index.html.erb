<section id="content" class="container">
<% unless params[:category].present? %>
  <h2 class="my-4"><strong>Recently Seen:</strong></h2>
<% end %>
<% if params[:category].present? %>
  <h2 class="my-4"><strong> <%= params[:category].camelcase %></strong></h2>
<% end %>

<div class="products-grid">
  <% @products.first(5).each do |product| %>
    <div class="product-card">
      <%= link_to product_path(product), class: 'product-link' do %>
        <%= image_tag(product.image, class: 'product-image') if product.image.attached? %>
        <div class="product-info">
          <% if product.favorited_by?(current_user) %>
            <%= link_to toggle_favorite_product_path(product), method: :post, class: 'product-icon-filled', remote: true do %>
              <%= image_tag 'like_filled.png' %>
            <% end %>
          <% else %>
            <%= link_to toggle_favorite_product_path(product), method: :post, class: 'product-icon', remote: true do %>
              <%= image_tag 'like.png' %>
            <% end %>
          <% end %>
          <span class="price">
            €<%= product.price_per_day.to_i == product.price_per_day ? product.price_per_day.to_i : product.price_per_day %>
          </span>
          <p class="title"><%= product.title %></p>
        </div>
      <% end %>
    </div>
  <% end %>
</div>




  <% unless params[:category].present? %>
    <h2 class="my-4"><strong>Recommended for you:</strong></h2>
  <% end %>
  <div class="products-grid">
    <% @products.drop(5).each do |product| %>
      <%= link_to product_path(product), class: 'product-link' do %>
        <div class="product-card">
          <%= image_tag(product.image, class: 'product-image') if product.image.attached? %>
          <div class="product-info">
            <span
              class="price">€<%= product.price_per_day.to_i == product.price_per_day ? product.price_per_day.to_i : product.price_per_day %>
              <%= image_tag "like.png", class: "product-icon" %>
            </span>
            <p class="title"><%= product.title %></p>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

  <% flash.each do |key, value| %>
    <div class="alert alert-<%= key %>">
      <%= value %>
    </div>
  <% end %>
</section>
